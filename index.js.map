{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// функції для відображення елементів інтерфейсу\n\nexport const createGalleryCardTemplate = imgInfo => {\n    return`\n       \n            <li class='gallery-card'>\n                <a class='gallery-link' href='${imgInfo.largeImageURL}'>\n                    <img class='gallery-img' src='${imgInfo.webformatURL}' alt='${imgInfo.tags}' />\n                    <div class='img-card'>\n                        <span class='span-text'>Likes <span class='span-number'>${imgInfo.likes}</span></span>\n                        <span class='span-text'>Views <span class='span-number'>${imgInfo.views}</span></span>\n                        <span class='span-text'>Comments <span class='span-number'>${imgInfo.comments}</span></span>\n                        <span class='span-text'>Downloads <span class='span-number'>${imgInfo.downloads}</span></span>\n                    </div>\n                </a>\n            </li>`;\n};","// функції для HTTP-запитів\n\nimport axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n    const axiosOptions = {\n        params: {\n            key: '48454112-2bb14e2eb4c862c9f6d932a5d',\n            q: searchedQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: '15',\n            page: currentPage\n        },\n    };\n    return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n\n","// вся логікa роботи додаткa\n\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js'\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet page = 1;\nlet searchedQuery = '';\n\nconst getCardHeight = () => {\n    const card = document.querySelector('.gallery-card');\n    return card.getBoundingClientRect().height;\n};\n\nconst smoothScroll = () => {\n    window.scrollBy({\n        top: getCardHeight() * 2,\n        left: 0,\n        behavior: 'smooth'\n    });\n};\n\nconst onSearchFormSubmit = async event => {\n    try {\n        event.preventDefault();\n\n        searchedQuery = event.currentTarget.elements.text_q.value.trim();\n        \n        if (searchedQuery === '') {\n            iziToast.warning({\n                title: 'Caution',\n                message: 'Please, enter valid search requirements!',\n            });\n\n            return;\n        }\n\n        page = 1;\n        loadMoreBtn.classList.add('is-hidden');\n        loader.style.display = 'block';\n        galleryEl.innerHTML = '';\n\n        const { data } = await fetchPhotosByQuery(searchedQuery, page);\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            galleryEl.innerHTML = '';\n            searchFormEl.reset();\n\n            loader.style.display = 'none';\n\n            return;\n        }\n\n        if (data.totalHits > 15) {\n            loadMoreBtn.classList.remove('is-hidden');\n            loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n        }\n\n        const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n        galleryEl.innerHTML = galleryTemplate;\n\n        const lightbox = new SimpleLightbox('.gallery-card a.gallery-link  ', {\n            // captionsData: 'alt',\n            // captionDelay: 250,\n        });\n        console.log(lightbox);\n\n    } catch (err) {\n        if (galleryEl.innerHTML === '') {\n            console.err('Error fetching data:', err);\n            iziToast.err({\n                title: 'Error',\n                message: 'An error occurred while searching for images',\n            });\n        }\n    }\n    loader.style.display = 'none';\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n    try {\n        page++;\n\n        const { data } = await fetchPhotosByQuery(searchedQuery, page);\n\n        const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n\n        galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n        if (page * 15 >= data.totalHits) {\n            iziToast.error({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n            loadMoreBtn.classList.add('is-hidden');\n            loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n        }\n\n        smoothScroll(); //Плавна прокрутка сторінки\n\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loader","loadMoreBtn","page","getCardHeight","smoothScroll","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","lightbox","SimpleLightbox","err"],"mappings":"+vBAEO,MAAMA,EAA4BC,GAC/B;AAAA;AAAA;AAAA,gDAGsCA,EAAQ,aAAa;AAAA,oDACjBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,kFAEZA,EAAQ,KAAK;AAAA,kFACbA,EAAQ,KAAK;AAAA,qFACVA,EAAQ,QAAQ;AAAA,sFACfA,EAAQ,SAAS;AAAA;AAAA;AAAA,mBCR1FC,EAAqB,CAACC,EAAeC,IAAgB,CAC9D,MAAMC,EAAe,CACjB,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,KACV,KAAMC,CACT,CACT,EACI,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC7D,ECLME,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAO,EACPR,EAAgB,GAEpB,MAAMS,EAAgB,IACL,SAAS,cAAc,eAAe,EACvC,sBAAuB,EAAC,OAGlCC,EAAe,IAAM,CACvB,OAAO,SAAS,CACZ,IAAKD,EAAa,EAAK,EACvB,KAAM,EACN,SAAU,QAClB,CAAK,CACL,EAEME,EAAqB,MAAMC,GAAS,CACtC,GAAI,CAKA,GAJAA,EAAM,eAAc,EAEpBZ,EAAgBY,EAAM,cAAc,SAAS,OAAO,MAAM,OAEtDZ,IAAkB,GAAI,CACtBa,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,0CACzB,CAAa,EAED,MACH,CAEDL,EAAO,EACPD,EAAY,UAAU,IAAI,WAAW,EACrCD,EAAO,MAAM,QAAU,QACvBD,EAAU,UAAY,GAEtB,KAAM,CAAE,KAAAS,CAAI,EAAK,MAAMf,EAAmBC,EAAeQ,CAAI,EAE7D,GAAIM,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,MAAM,CACX,QAAS,0EACzB,CAAa,EACDR,EAAU,UAAY,GACtBD,EAAa,MAAK,EAElBE,EAAO,MAAM,QAAU,OAEvB,MACH,CAEGQ,EAAK,UAAY,KACjBP,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,iBAAiB,QAASQ,CAAkB,GAG5D,MAAMC,EAAkBF,EAAK,KAAK,IAAIG,GAAMpB,EAA0BoB,CAAE,CAAC,EAAE,KAAK,EAAE,EAClFZ,EAAU,UAAYW,EAEtB,MAAME,EAAW,IAAIC,EAAe,iCAAkC,CAG9E,CAAS,EACD,QAAQ,IAAID,CAAQ,CAEvB,OAAQE,EAAK,CACNf,EAAU,YAAc,KACxB,QAAQ,IAAI,uBAAwBe,CAAG,EACvCP,EAAS,IAAI,CACT,MAAO,QACP,QAAS,8CACzB,CAAa,EAER,CACDP,EAAO,MAAM,QAAU,MAC3B,EAEAF,EAAa,iBAAiB,SAAUO,CAAkB,EAE1D,MAAMI,EAAqB,MAAMH,GAAS,CACtC,GAAI,CACAJ,IAEA,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMf,EAAmBC,EAAeQ,CAAI,EAEvDQ,EAAkBF,EAAK,KAAK,IAAIG,GAAMpB,EAA0BoB,CAAE,CAAC,EAAE,KAAK,EAAE,EAElFZ,EAAU,mBAAmB,YAAaW,CAAe,EAErDR,EAAO,IAAMM,EAAK,YAClBD,EAAS,MAAM,CACX,QAAS,4DACzB,CAAa,EACDN,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASQ,CAAkB,GAG/DL,GAEH,OAAQU,EAAK,CACV,QAAQ,IAAIA,CAAG,CAClB,CACL,EAEAb,EAAY,iBAAiB,QAASQ,CAAkB"}